# 正则表达式基础

| 字符  | 功能                                            | 补充                                                         |
| ----- | ----------------------------------------------- | ------------------------------------------------------------ |
| .     | 匹配除换行符之外的任何内容（\n）                | 可选模式（ [re.DOTALL](https://docs.python.org/zh-cn/3/library/re.html#re.DOTALL) ）可以匹配换行符 |
| [ ]   | 匹配[ ]中列举的字符                             |                                                              |
| \d    | 匹配数字，即0-9                                 | 可以写在字符集[...]中                                        |
| \D    | 匹配⾮数字                                      | 可以写在字符集[...]中                                        |
| \s    | 匹配空⽩，即空格，tab键。等价于类 [ \t\n\r\f\v] | 可以写在字符集[...]中                                        |
| \S    | 匹配⾮空⽩字符                                  | 可以写在字符集[...]中                                        |
| \w    | 匹配单词字符，即a-z、A-Z、0-9、_                | 可以写在字符集[...]中                                        |
| \W    | 匹配⾮单词字符                                  | 可以写在字符集[...]中                                        |
| [...] | 字符集                                          | 第一个字符如果是^表示取反。所有特殊字符（比如"]""-""^"）在字符集中都失去原来的含义，如要使用可把"]""-"放在第一个字符，"^"放在非第一个字符。 |


| 字符   | 功能                                                         | 位置                | 表达式实例 | 完整匹配的字符串 |
| ------ | ------------------------------------------------------------ | ------------------- | ---------- | ---------------- |
| *      | 匹配前⼀个字符出现0次或者⽆限次，即可有可⽆                  | 用在字符或(...)之后 | abc*       | abccc            |
| +      | 匹配前⼀个字符出现1次或者⽆限次，即⾄少有1次                 | 用在字符或(...)之后 | abc+       | abccc            |
| ?      | 匹配前⼀个字符出现1次或者0次，即要么有1次，要么没有          | 用在字符或(...)之后 | abc?       | ab,abc           |
| {m}    | 匹配前⼀个字符出现m次                                        | 用在字符或(...)之后 | ab{2}c     | abbc             |
| {m, n} | 匹配前⼀个字符出现从m到n次<br />M,N可省略<br />`{0,}` 与 `*` 相同， `{1,}` 相当于 `+` ， `{0,1}` 和 `?` 相同。 | 用在字符或(...)之后 | ab{1,2}c   | abc,abbc         |


| 字符 | 功能                                                         |
| ---- | ------------------------------------------------------------ |
| ^    | 匹配字符串开头，除非设置了 `MULTILINE` 标志，否则只会在字符串的开头匹配。 在 `MULTILINE` 模式下，这也在字符串中的每个换行符后立即匹配。 |
| $    | 匹配字符串结尾，定义为字符串的结尾，或者后跟换行符的任何位置。 |


| 字符         | 功能                                                       |
|------------| ---------------------------------------------------------- |
| &vert;     | 匹配左右任意⼀个表达式                                     |
| (ab)       | 将括号中字符作为⼀个分组                                   |
| \num       | 引⽤分组num匹配到的字符串                                  |
| (?P)<name> | 分组起别名，匹配到的子串组在外部是通过定义的 name 来获取的 |
| (?P=name)  | 引⽤别名为name分组匹配到的字符串                           |



## python贪婪和⾮贪婪

Python⾥数量词默认是贪婪的（在少数语⾔⾥也可能是默认⾮贪婪），总是尝试匹配尽可能多的字符；⾮贪婪则相反，总是尝试匹配尽可能少的字符。

例如：正则表达式”ab*”如果用于查找”abbbc”，将找到”abbb”。而如果使用非贪婪的数量词”ab*?”，将找到”a”。

注：我们一般使用非贪婪模式来提取。

**在"*","?","+","{m,n}"后⾯加上？，使贪婪变成⾮贪婪。**


## r的作⽤

假如你需要匹配文本中的字符”\”，那么使用编程语言表示的正则表达式里将需要4个反斜杠”\\\\”：前两个和后两个分别用于在编程语言里转义成反斜杠，转换成两个反斜杠后再在正则表达式里转义成一个反斜杠。

Python里的原生字符串很好地解决了这个问题，Python中字符串前⾯加上 r 表示原⽣字符串。

```python
import re

mm = "c:\\a\\b\\c"
print(mm)#c:\a\b\c
ret = re.match("c:\\\\",mm).group()
print(ret)#c:\
ret = re.match("c:\\\\a",mm).group()
print(ret)#c:\a
ret = re.match(r"c:\\a",mm).group()
print(ret)#c:\a
ret = re.match(r"c:\a",mm).group()
print(ret)#AttributeError: 'NoneType' object has no attribute 'group'
```


